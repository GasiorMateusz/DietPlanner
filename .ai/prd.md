Diet Planner (MVP)

## 1. Product Overview

Diet Planner is a web application in MVP (Minimum Viable Product) version, designed to streamline the work of dietitians. The main goal of the application is to automate and accelerate the process of creating personalized, 1-day meal plans for patients. The application uses integration with an AI language model (via OpenRouter), which generates initial versions of nutritional plans based on detailed guidelines entered by the dietitian.

The key workflow is based on a three-step process:
1. The dietitian fills out a structured form, defining patient parameters, caloric goals, macronutrients, and exclusions.
2. AI generates a 1-day meal plan in a conversational interface, allowing for iterative corrections.
3. After acceptance, the generated content is transferred to an editor, where the dietitian can make final, manual modifications, save the meal plan, and export it to a .doc file ready for printing.

The application is intended exclusively for dietitians and requires account creation for storing and managing created meal plans.

## 2. User Problem

Dietitians spend a significant amount of time manually creating individual nutritional plans for their patients. This process is complex and requires consideration of many variables, such as:
- Individual caloric requirements (resulting from age, weight, height, and physical activity level)
- Nutritional goals (e.g., weight reduction, muscle mass building)
- Macronutrient distribution (proteins, fats, carbohydrates)
- Allergies, food intolerances, and other exclusions (e.g., vegetarian, gluten-free diet)
- Patient taste preferences

Current solutions often rely on working with spreadsheets, text templates, or recipe databases, which is time-consuming and error-prone.

Diet Planner aims to solve this problem by offering a tool that, based on AI, drastically reduces the time needed to prepare high-quality, personalized meal plans, while leaving the dietitian with full control over the final shape of the plan.

## 3. Functional Requirements

### 3.1. User Account Management (Dietitian)

- Registration of a new account using email address and password
- Registration form must contain a mandatory checkbox field with acceptance of terms and conditions and a statement of taking full responsibility for verifying AI-generated content
- Login to existing account
- "Forgot password" functionality enabling password reset via email
- "My Account" panel available after login, containing options:
  - Change password
  - Permanent account deletion along with all data

### 3.2. Dashboard (Main Panel)

- This is the main application view visible after login
- Displays a list of all meal plans saved by the user
- Each list item contains the meal plan name and action buttons
- "Create new meal plan" button initiating the plan creation process
- Search field enabling live filtering of the meal plan list by entered name
- Available actions for each meal plan on the list:
  - "Edit / View": Opens the meal plan in editor view
  - "Export to .doc": Generates and downloads a .doc file with the meal plan
  - "Delete": Permanently deletes the meal plan (requires additional confirmation)

### 3.3. Meal Plan Creation Process

#### 3.3.1. Startup Form

- Displayed as a modal window or side panel after clicking "Create new meal plan"
- Contains structured fields to collect input data (context) for AI:
  - Patient data: age, weight (kg), height (cm)
  - Physical activity level (dropdown list, e.g., sedentary, light, moderate, high)
  - Target caloric intake (numeric field, Kcal)
  - Target macronutrient distribution (in % or grams for proteins, fats, and carbohydrates)
  - Meal names (text field, e.g., "Breakfast, Second Breakfast, Lunch, Dinner")
  - Large text field for "Exclusions, allergies, and other guidelines"

#### 3.3.2. AI Chat Interface

- Initiated after submitting the startup form
- Displays the first 1-day meal plan proposal generated by AI
- Enables further conversation to introduce corrections (e.g., "Change dinner to something dairy-free")
- In the chat view, a disclaimer is permanently visible informing about the need for dietitian verification of AI-generated content
- Has an "Accept and edit manually" button that ends AI interaction and transfers content to the editor

#### 3.3.3. Meal Plan Editor

- Structured view (form, not chat) that is automatically filled with content accepted from AI chat
- Text field for "Meal Plan Name" (required for saving)
- For each meal, the following are displayed:
  - Meal name (editable)
  - "Ingredients and portions" text field (editable)
  - "Preparation method" text field (editable)
  - Displayed (static) values: Kcal and P/F/C (in grams and %)
- Also displayed is a summary of macronutrients and calories for the entire day (static, not automatically recalculated after manual editing)
- "Save changes" button that saves the meal plan to the database and redirects the user to Dashboard
- Ability to manually add and remove meals within the plan

### 3.4. Export to .doc

- Function available from Dashboard or Editor level for a saved meal plan
- Generates a file in .doc format that is downloaded by the browser
- Export template contains two sections:
  - Diet assumptions summary (context used for generation: age, weight, kcal, macro goals, exclusions)
  - Complete 1-day nutritional plan (meal names, ingredients with portions, preparation instructions, macro values for each meal, and daily summary)

### 3.5. Telemetry (Non-functional Requirements)

- System should track the number of user interactions (prompts) in each chat session (from initiation to clicking the accept button)
- AI conversation history should be saved in the backend for analytical purposes and further model improvement (this data is not available to the user in the interface)

## 4. Product Boundaries

The following functionalities are deliberately NOT included in the MVP version:
- Use of external recipe databases or URL links for creating meal plans
- Multimedia support (e.g., adding photos to recipes)
- Social features, such as sharing recipes with other users
- Data import capability (e.g., patient data from other systems)
- Sharing meal plans or patients between different dietitian accounts
- Mobile application (project is implemented exclusively as a web application)
- "Private cookbook" function for saving favorite dishes or recipes
- Ability to reload a saved meal plan back into the AI chat interface for further editing
- Creating and editing multi-day meal plans in one view
- Separate "Patient" entity in the system (meal plan is identified solely by its name)
- Automatic saving of changes in the editor (saving is exclusively manual)
- Automatic recalculation of nutritional values after manual ingredient editing in the editor

## 5. User Stories

### Module: Account Management

**ID: US-001**
**Title: New account registration**
**Description:** As a new user, I want to be able to create an account in the application by providing my email and password, so I can start creating meal plans.
**Acceptance Criteria:**
- Registration form contains fields: "Email address", "Password", "Repeat password", and checkbox "I accept the terms..."
- Client-side validation checks if passwords are identical and if email has correct format
- Checking the checkbox is required to submit the form
- After successful registration, I am automatically logged in and redirected to Dashboard
- If I try to register with an already existing email, I receive a clear error message

**ID: US-002**
**Title: Application login**
**Description:** As a registered dietitian, I want to be able to log into my account to access my saved meal plans.
**Acceptance Criteria:**
- Login page contains "Email address", "Password" fields and "Login" button
- After providing correct credentials and clicking "Login", I am redirected to Dashboard
- In case of providing incorrect data, error message "Invalid email or password" is displayed
- Login page contains "Forgot password" link

**ID: US-003**
**Title: Password reset**
**Description:** As a user who forgot their password, I want to have the ability to reset it to regain account access.
**Acceptance Criteria:**
- After clicking "Forgot password", I am taken to a page where I can enter my email address
- After providing email and confirming it, a password reset link is sent to my mailbox
- Link is unique and has limited validity time
- After clicking the link, I am taken to a page where I can set a new password (entering it twice)

**ID: US-004**
**Title: Account management**
**Description:** As a logged-in user, I want to have access to "My Account" panel where I can change password or delete my account.
**Acceptance Criteria:**
- "My Account" section is available in the application
- This section contains a password change form ("Old password", "New password", "Repeat new password")
- There is also a "Delete account" button
- Clicking "Delete account" displays a modal window asking for confirmation of this operation
- After confirmation, my account and all associated data (meal plans) are permanently deleted from the system

### Module: Dashboard and Meal Plan Management

**ID: US-005**
**Title: Viewing saved meal plans**
**Description:** As a dietitian, after logging in I want to see a list of all my saved meal plans so I can quickly return to them.
**Acceptance Criteria:**
- Dashboard displays all saved meal plans in list form
- If I have no saved meal plans, I see an informative message, e.g., "You don't have any meal plans yet. Create your first plan!"
- Each list item contains meal plan name and action buttons ("Edit/View", "Export", "Delete")

**ID: US-006**
**Title: Meal plan search**
**Description:** As a dietitian with many meal plans, I want to be able to quickly find a specific plan by its name.
**Acceptance Criteria:**
- Dashboard contains a "Search..." text field
- As I type text in the field, the meal plan list is filtered in real-time
- Filtering is case-insensitive

**ID: US-007**
**Title: Meal plan deletion**
**Description:** As a dietitian, I want to be able to delete a meal plan I no longer need.
**Acceptance Criteria:**
- Each meal plan on the list has a "Delete" button
- Clicking the "Delete" button displays a modal window asking "Are you sure you want to delete this meal plan?"
- After confirmation in the modal window, the meal plan is permanently deleted from the database and disappears from the Dashboard list

### Module: Meal Plan Creation and Editing

**ID: US-008**
**Title: Initiating new meal plan creation (Happy Path)**
**Description:** As a dietitian, I want to start creating a new meal plan by filling out a form with basic data and guidelines.
**Acceptance Criteria:**
- Clicking "Create new meal plan" on Dashboard opens the startup form
- I can fill all form fields (age, weight, kcal, macro, meal names, exclusions)
- After filling the form and clicking "Generate", I am taken to the AI chat interface, and the system sends the first query to AI
- AI returns the first 1-day meal plan proposal in the chat window

**ID: US-009**
**Title: Iterative meal plan improvement in AI chat**
**Description:** As a dietitian, I want to be able to introduce corrections to the generated meal plan through conversation with AI before accepting it.
**Acceptance Criteria:**
- Below the generated plan in chat, there is a field for entering a message
- I can enter a corrective command, e.g., "Change lunch to vegetarian"
- After sending the message, AI generates and displays a new, updated version of the entire meal plan
- I can repeat this process multiple times

**ID: US-010**
**Title: Acceptance and transition to editor**
**Description:** As a dietitian, when I am satisfied with the meal plan version in chat, I want to accept it and move to the editor for finalization.
**Acceptance Criteria:**
- "Accept and edit manually" button is visible in the chat interface
- After clicking the button, I am taken to the Meal Plan Editor view
- All fields in the editor (meal names, ingredients, instructions, macro) are automatically filled with content from the last meal plan version from chat

**ID: US-011**
**Title: Manual editing and meal plan saving**
**Description:** As a dietitian, in the editor view I want to be able to manually modify each meal plan element and save it under a chosen name.
**Acceptance Criteria:**
- All text fields in the editor are editable
- I can change meal name, ingredient list content, and preparation instructions
- I must fill the "Meal Plan Name" field for the "Save changes" button to become active
- After clicking "Save changes", the meal plan is saved to the database, and I am redirected back to Dashboard
- Newly saved meal plan is visible at the top of the Dashboard list

**ID: US-012**
**Title: Ready meal plan export**
**Description:** As a dietitian, I want to be able to export a saved meal plan to a .doc file to provide it to a patient in print form.
**Acceptance Criteria:**
- "Export to .doc" button is available on Dashboard and in Editor view
- After clicking the button, the browser starts downloading a .doc file
- Downloaded file has a readable structure containing diet assumptions summary and complete meal plan
- File content corresponds to the last saved version of the meal plan

## 6. Success Metrics

### 6.1. Main Product Success Indicator

**Metric:** AI generation acceptance rate
**Goal:** 75% of meal plan creation sessions end with clicking "Accept and edit manually" button after a maximum of 4 corrective prompts (i.e., in 5 or fewer interactions with AI, including the first generation)
**Measurement method:** Backend system will count the number of queries sent by the user within one AI chat session. Data will be collected for analytical purposes to assess the effectiveness and quality of generated content. Exceeding the threshold of 5 interactions will not trigger any action in the user interface.

### 6.2. Supporting Indicators

- **User retention:** Percentage of users who return to the application in subsequent weeks after registration
- **Usage frequency:** Average number of meal plans created by an active user per month

